
:version:
  :name: tag_config
  :current: 2.0
  :authors: ["Chad Thatcher", "Sandra Tuppen", "Laurent Pugin", "Rodolfo Zitellini"]


# NOTES FOR "tags" SECTION:
#
# The ":dependency:" field indicates a subtags reliance and function according to its parent.  Values are:
# false (no parent for this subtag.  Used for "a" or "" subtags or other subtags that are independant of other subtags)
# true  (must be in addition to parent subtag, cannot exist without it)
#
# Subtag ":occurrences:" fields are always within context of thier parent subtag.  In the case of parent sutags ("a", "" (blank)
# and some "w" tags) this defines the repetition attributes for the whole tag
#
# 0 (none. used only to keep tag/subtag configurations that are unused and therefore discarded on import)
# ? (none or one. this subtag need not be present, but at most only one occurance may exist)
# 1 (one occurance must exist. no more than one is allowed)
# + (one or more must exist.  at least one occurance must be present, more occurrences are allowed)
# * (none or more. none, one or many may exist)
#
# >where a tag or subtag is repeatable, there shouldn't be an upper limit on number of repeats allowed,
# >so I've amended all the values in the max_occur fields to "0".
# max_occur has now been removed entirely
#
# *DEPRECATED AND REMOVED* The "max_occur:" field is used in conjunction with the '+' or '*' ":occurrences:"
# field values to limit the number of occurrences to the specified maximum value.  A value of 0 inidicates
# and unlimited number of occurrences.  Only set this value to a positive number if it is absolutely
# necessary to set an upper limit on the number of occurrences of this subtag.
#
# >ST NOTE: TAGS 000 to 008
# >These are different from all the later tags in that they don't have any subtags (not even "a").
# >So should the master for each be changed to "" instead of a?
# This has now been corrected
#
# The ":export_as:" field specifies the mandatory value for a subtag on an export.  The subtag is only
# exported if both ":occurrences:" is set to "0" and this value is present.  This applies only to dependent
# subtags (i.e. not "a" subtags).
#
# "index" fields specify which marc fields are included in the fulltext ferret index when a record is
# inserted or updated in the masters table. See search_config.X.X.yml for more details on search functionality
# and the fulltext index.

:model: source
:tags:
  "000":
    :master: ""
    :indicator: ""
    :occurrences: "1"
    :fields:
    - - ""
      - :no_browse: true
  "001":
    :master: ""
    :indicator: ""
    :occurrences: "1"
    :zero_padding: "14"
    :fields:
    - - ""
      - :no_browse: true
  "003":
    :master: ""
    :indicator: ""
    :occurrences: "1"
    :fields:
    - - ""
      - :no_browse: true
  "004":
    # this is a special used internally for holding records
    :master: ""
    :indicator: ""
    :occurrences: "?"
    :fields:
    - - ""
      - :occurrences: "1"
        :foreign_class: Source
        :foreign_field: id
        :zero_padding: "14"
  "007":
    :master: ""
    :indicator: ""
    :occurrences: "*"
    :fields:
    - - ""
      - :no_browse: true
  "028":
    :master: a
    :indicator: "20"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
  "031":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
    - - b
      - :occurrences: "?"
    - - c
      - :occurrences: "?"
    - - d
      - :occurrences: "*"
    - - e
      - :occurrences: "?"
    - - g
      - :occurrences: "?"
    - - m
      - :occurrences: "?"
    - - n
      - :occurrences: "?"
    - - o
      - :occurrences: "?"
    - - p
      - :occurrences: "?"
    - - q
      - :occurrences: "*"
    - - r
      - :occurrences: "?"
    - - s
      - :occurrences: "*"
    - - t
      - :occurrences: "*"
    - - x
      - :occurrences: "*"
    - - "2"
      - :occurrences: "?"
        :no_browse: true
        # default "pe" value must be added during exportation
        # ["0#", "1#", "2#"]
  "033":
    :master: a
    :indicator: ["0#", "1#", "2#"]
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "*"
        :no_browse: true
  "035":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
  "040":
    :master: a
    :indicator: "##"
    :occurrences: "1"
    :fields:
    - - a
      - :occurrences: "1"
    - - b
      - :occurrences: "1"
    - - c
      - :occurrences: "1"
    - - d
      - :occurrences: "?"

# NOTES FOR 041:
#
# There are two 'a' tags here with different indicators.  Can both variations exist in a manuscript at the
# same time?  If not, then this should be amalgamated into one 'a' subtag with two variations on the
# indicator field entered as ["0#", "1#"]
#
# >ST NOTE: No, the two variants can't exist in the same record, so I've amalgamated them into one "a" subtag.
# >I've amended the indicator field, but please check I've done this right.
# I have put in the opening and closing square brackets
#
# Also this is the first occurance of a subordinate tag ('h').  On this subtag the dependency field is
# set to false - this means 'h' can exist without the presence of an 'a' subtag.  If this is incorrect
# the dependency field should be changed to true and its repeat and max_occur fields set in the context
# of the "parent" subtag ('a').   This note applies to all remaining tags where subordinate subtags exist.
#
# >ST NOTE: dependency field for 'h' corrected to true.


  "041":
    :master: a
    :indicator: ["0#", "1#"]
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "*"
    - - d
      - :occurrences: "*"
    - - e
      - :occurrences: "*"
    - - g
      - :occurrences: "*"
        :no_browse: true
    - - h
      - :occurrences: "*"
  "100":
    :master: "0"
    :indicator: "1#"
    :occurrences: "?"
    :fields:
    - - "0"
      - :occurrences: "?"
        :foreign_class: Person
        :foreign_field: id
        :no_show: true
    - - a
      - :occurrences: "?"
        :foreign_class: ^0
        :foreign_field: full_name
    - - d
      - :occurrences: "?"
        :browse_inline: true
        :foreign_class: ^0
        :foreign_field: life_dates
        :foreign_alternates: alternate_dates
    - - j
      - :occurrences: "?"
  "110":
    :master: "0"
    :indicator: "2#"
    :occurrences: "?"
    :fields:
    - - "0"
      - :occurrences: "?"
        :foreign_class: Institution
        :foreign_field: id
        :no_show: true
    - - a
      - :occurrences: "?"
        :no_browse: true
        :foreign_class: ^0
        :foreign_field: name
    - - b
      - :occurrences: "*"
        :no_browse: true
    - - k
      - :occurrences: "0"
        :export_as: "Source"
        :no_browse: true
#
# ST NOTE: I've amended repeat value of 110 k to "0" as it can be discarded on import.
# I hope this is correct usage of that code.
#
  "130":
    :master: "0"
    :indicator: "0#"
    :occurrences: "?"
    :fields:
    - - "0"
      - :occurrences: "?"
        :foreign_class: StandardTitle
        :foreign_field: id
        :no_show: true
    - - a
      - :occurrences: "?"
        :foreign_class: ^0
        :foreign_field: title
    - - k
      - :occurrences: "?"
    - - m
      - :occurrences: "*"
    - - n
      - :occurrences: "*"
    - - o
      - :occurrences: "?"
    - - p
      - :occurrences: "?"
    - - r
      - :occurrences: "?"
  "240":
    :master: "0"
    :indicator: "10"
    :occurrences: "?"
    :fields:
    - - "0"
      - :occurrences: "?"
        :foreign_class: StandardTitle
        :foreign_field: id
        :no_show: true
    - - a
      - :occurrences: "?"
        :foreign_class: ^0
        :foreign_field: title
    - - k
      - :occurrences: "?"
    - - m
      - :occurrences: "*"
    - - n
      - :occurrences: "*"
    - - o
      - :occurrences: "?"
    - - p
      - :occurrences: "?"
    - - r
      - :occurrences: "?"
  "245":
    :master: a
    :indicator: "10"
    :occurrences: "1"
    :fields:
    - - a
      - :occurrences: "1"
    - - b
      - :occurrences: "?"
    - - c
      - :occurrences: "?"
        :no_browse: true
    - - n
      - :occurrences: "*"
        :no_browse: true
  "246":
    :master: a
    :indicator: "2#"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
    - - b
      - :occurrences: "?"
        :no_browse: true
    - - i
      - :occurrences: "?"
  "254":
    :master: a
    :indicator: "##"
    :occurrences: "?"
    :fields:
    - - a
      - :occurrences: "?"
  "260":
    :master: a
    :indicator: "##"
    :occurrences: "+"
    :groupable: "8"
    :fields:
    - - a
      - :occurrences: "1"
    - - b
      - :occurrences: "1"
    - - c
      - :occurrences: "1"
    - - e
      - :occurrences: "?"
    - - f
      - :occurrences: "?"
    - - "8"
      - :occurrences: "?"
        :no_browse: true
  "270":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "*"
  "300":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :groupable: "8"
    :fields:
    - - a
      - :occurrences: "*"
    - - b
      - :occurrences: "?"
    - - c
      - :occurrences: "?"
    - - "8"
      - :occurrences: "?"
        :no_browse: true
  "340":
    :master: c
    :indicator: "##"
    :occurrences: "*"
    :groupable: "8"
    :fields:
    - - d
      - :occurrences: "*"
    - - "8"
      - :occurrences: "?"
        :no_browse: true
  "351":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :groupable: "8"
    :fields:
    - - a
      - :occurrences: "*"
    - - "8"
      - :occurrences: "?"
        :no_browse: true
  "490":
    :master: a
    :indicator: "2#"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
  "500":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
        :browse_helper: application_helper_link_http
    - - "5"
      - :occurrences: "?"
        :no_browse: true
  "505":
    :master: a
    :indicator: "0#"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
    - - r
      - :occurrences: "*"
        :no_browse: true
  "506":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
  "508":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
  "510":
    :master: a
    :indicator: "0#"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
    - - c
      - :occurrences: "?"
  "511":
    :master: a
    :indicator: "0#"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
  "518":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
  "520":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
  "525":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
  "533":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
  "541":
    :master: a
    :indicator: "1#"
    :occurrences: "?"
    :fields:
    - - a
      - :occurrences: "?"
    - - c
      - :occurrences: "?"
    - - d
      - :occurrences: "?"
  "545":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
  "546":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
  "555":
    :master: a
    :indicator: "0#"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
  "561":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
    - - "5"
      - :occurrences: "?"
        :no_browse: true
  "562":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "*"
    - - "5"
      - :occurrences: "?"
        :no_browse: true
  "563":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
    - - "5"
      - :occurrences: "?"
        :no_browse: true
  "580":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
        :no_browse: true
  "590":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :groupable: "8"
    :fields:
    - - a
      - :occurrences: "?"
    - - b
      - :occurrences: "?"
    - - "8"
      - :occurrences: "?"
        :no_browse: true
  "591":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
    - - "4"
      - :occurrences: "*"
  "592":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :groupable: "8"
    :fields:
    - - a
      - :occurrences: "?"
    - - "8"
      - :occurrences: "?"
        :no_browse: true
  "593":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :groupable: "8"
    :fields:
    - - a
      - :occurrences: "?"
    - - "8"
      - :occurrences: "?"
        :no_browse: true
  "594":
    :master: ""
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
    - - b
      - :occurrences: "*"
    - - c
      - :occurrences: "*"
    - - d
      - :occurrences: "*"
    - - e
      - :occurrences: "*"
    - - f
      - :occurrences: "?"
    - - g
      - :occurrences: "?"
    - - h
      - :occurrences: "?"
    - - i
      - :occurrences: "*"
    - - k
      - :occurrences: "*"
    - - l
      - :occurrences: "*"
    - - m
      - :occurrences: "*"
    - - n
      - :occurrences: "?"
  "595":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
  "596":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
  "597":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
  "598":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
  "599":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
  "600":
    :master: "0"
    :indicator: "14"
    :occurrences: "*"
    :fields:
    - - "0"
      - :occurrences: "?"
        :foreign_class: Person
        :foreign_field: id
        :no_show: true
    - - a
      - :occurrences: "?"
        :foreign_class: ^0
        :foreign_field: full_name
        :no_browse: true
    - - d
      - :occurrences: "?"
        :browse_inline: true
        :foreign_class: ^0
        :foreign_field: life_dates
        :foreign_alternates: alternate_dates
        :no_browse: true
  "650":
    :master: "0"
    :indicator: ["00", "07"]
    :occurrences: "*"
    :fields:
    - - "0"
      - :occurrences: "?"
        :foreign_class: StandardTerm
        :foreign_field: id
        :no_show: true
    - - a
      - :occurrences: "?"
        :foreign_class: ^0
        :foreign_field: term
    - - v
      - :occurrences: "*"
        :no_browse: true
    - - x
      - :occurrences: "*"
    - - y
      - :occurrences: "*"
        :no_browse: true
    - - z
      - :occurrences: "*"
        :no_browse: true
    - - "2"
      - :occurrences: "?"
        :no_browse: true
      # default "CH-BeSRO" value must be added during exportation
  "651":
    :master: "0"
    :indicator: "#7"
    :occurrences: "*"
    :fields:
    - - "0"
      - :occurrences: "?"
        :foreign_class: Place
        :foreign_field: id
        :no_show: true
    - - a
      - :occurrences: "?"
        :foreign_class: ^0
        :foreign_field: name
    - - "2"
      - :occurrences: "?"
        :no_browse: true
      # default "CH-BeSRO" value must be added during exportation
  "653":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
  "657":
    :master: "0"
    :indicator: "#7"
    :occurrences: "*"
    :fields:
    - - "0"
      - :occurrences: "?"
        :foreign_class: LiturgicalFeast
        :foreign_field: id
        :no_show: true
    - - a
      - :occurrences: "?"
        :foreign_class: ^0
        :foreign_field: name
    - - "2"
      - :occurrences: "?"
        :no_browse: true
      # default "CH-BeSRO" value must be added during exportation
  "690":
    :master: "0"
    :indicator: "#7"
    :occurrences: "*"
    :fields:
    - - "0"
      - :occurrences: "?"
        :foreign_class: Catalogue
        :foreign_field: id
        :no_show: true
    - - a
      - :occurrences: "?"
        :foreign_class: ^0
        :foreign_field: name
    - - n
      - :occurrences: "?"
    - - "2"
      - :occurrences: "?"
        :no_browse: true
      # default "CH-BeSRO" value must be added during exportation
  "691":
    :master: "0"
    :indicator: "#7"
    :occurrences: "*"
    :fields:
    - - "0"
      - :occurrences: "?"
        :foreign_class: Catalogue
        :foreign_field: id
        :no_show: true
    - - a
      - :occurrences: "?"
        :foreign_class: ^0
        :foreign_field: name
    - - n
      - :occurrences: "?"
    - - "2"
      - :occurrences: "?"
        :no_browse: true
      # default "CH-BeSRO" value must be added during exportation
  "700":
    :master: "0"
    :indicator: "1#"
    :occurrences: "*"
    :fields:
    - - "0"
      - :occurrences: "?"
        :foreign_class: Person
        :foreign_field: id
        :no_show: true
    - - a
      - :occurrences: "?"
        :foreign_class: ^0
        :foreign_field: full_name
    - - d
      - :occurrences: "?"
        :browse_inline: true
        :foreign_class: ^0
        :foreign_field: life_dates
        :foreign_alternates: alternate_dates
        #:no_browse: true
    - - "e"
      - :occurrences: "*"
    - - "t"
      - :occurrences: "?"
    - - "4"
      - :occurrences: "*"
        :browse_inline: true
        #:no_browse: true
    - - "5"
      - :occurrences: "?"
        :no_browse: true
  "710":
    :master: "0"
    :indicator: "2#"
    :occurrences: "*"
    :fields:
    - - "0"
      - :occurrences: "?"
        :foreign_class: Institution
        :foreign_field: id
        :no_show: true
    - - a
      - :occurrences: "?"
        :foreign_class: ^0
        :foreign_field: name
    - - b
      - :occurrences: "*"
    - - k
      - :occurrences: "0"
        :export_as: "Source"
        :no_browse: true
    - - "e"
      - :occurrences: "*"
    - - "4"
      - :occurrences: "*"
    - - "5"
      - :occurrences: "?"
        :no_browse: true

#
# ST NOTE: As with 110 k, I've amended repeat value of 710 k to "0" as this field can be discarded on import.
#
  "730":
    :master: "0"
    :indicator: "0#"
    :occurrences: "*"
    :fields:
    - - "0"
      - :occurrences: "?"
        :foreign_class: StandardTitle
        :foreign_field: id
        :no_show: true
    - - a
      - :occurrences: "?"
        :foreign_class: ^0
        :foreign_field: title
    - - k
      - :occurrences: "?"
    - - m
      - :occurrences: "*"
    - - n
      - :occurrences: "*"
    - - o
      - :occurrences: "?"
    - - p
      - :occurrences: "?"
    - - r
      - :occurrences: "?"
  "740":
     :master: "a"
     :indicator: "0#"
     :occurrences: "*"
     :fields:
     - - a
       - :occurrences: "?"
     - - n
       - :occurrences: "*"
     - - p
       - :occurrences: "*"
  "752":
    :master: "0"
    :indicator: "#7"
    :occurrences: "*"
    :fields:
    - - "0"
      - :occurrences: "?"
        :foreign_class: Place
        :foreign_field: id
        :no_show: true
    - - a
      - :occurrences: "?"
        :foreign_class: ^0
        :foreign_field: country
    - - d
      - :occurrences: "?"
        :foreign_class: ^0
        :foreign_field: name
  "772":
    :master: w
    :indicator: "18"
    :occurrences: "*"
    :fields:
    - - w
      - :occurrences: "1"
        :browse_helper: application_helper_link_source_id
    - - "7"
      - :occurrences: "0"
        :no_browse: true
  "773":
    :master: w
    :indicator: "18"
    :occurrences: "?"
    :fields:
    - - "a"
      - :occurrences: "1"
        :foreign_class: Source
        :foreign_field: id
        :zero_padding: "14"
        :browse_helper: application_helper_link_source_id

    - - w
      - :occurrences: "1"
        :foreign_class: Source
        :foreign_field: id
        :zero_padding: "14"
        :browse_helper: application_helper_link_source_id
    - - i
      - :occurrences: "?"
    - - "7"
      - :occurrences: "0"
        :no_browse: true
  "775":
    :master: w
    :indicator: "##"
    :occurrences: "?"
    :fields:
    - - a
      - :occurrences: "?"
    - - w
      - :occurrences: "1"
        :foreign_class: Source
        :foreign_field: id
        :zero_padding: "14"
        :browse_helper: application_helper_link_source_id

  "786":
    :master: a
    :indicator: "0#"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
    - - d
      - :occurrences: "?"
    - - i
      - :occurrences: "?"
    - - o
      - :occurrences: "?"
    - - n
      - :occurrences: "?"
    - - t
      - :occurrences: "?"
  "787":
    :master: a
    :indicator: "18"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
        :browse_helper: application_helper_link_source_id
    - - g
      - :occurrences: "*"
        :no_browse: true
    - - n
      - :occurrences: "*"
        :no_browse: true
    - - s
      - :occurrences: "?"
        :no_browse: true
    - - w
      - :occurrences: "*"
        :browse_helper: application_helper_link_source_id
    - - "7"
      - :occurrences: "0"
        :no_browse: true
  "789":
    :master: a
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - a
      - :occurrences: "?"
    - - b
      - :occurrences: "?"
    - - c
      - :occurrences: "?"
    - - e
      - :occurrences: "?"
    - - f
      - :occurrences: "?"
    - - g
      - :occurrences: "?"
    - - h
      - :occurrences: "?"
    - - i
      - :occurrences: "?"
        :no_browse: true
    - - n
      - :occurrences: "?"
    - - o
      - :occurrences: "?"
    - - t
      - :occurrences: "?"
  "852":
    :master: "0"
    :indicator: "##"
    :occurrences: "?"
    :fields:
    - - "0"
      - :occurrences: "?"
        :foreign_class: Institution
        :foreign_field: id
        :no_show: true
    - - a
      - :occurrences: "1"
        :foreign_class: ^0
        :foreign_field: siglum
        :browse_helper: application_helper_link_to_library
    - - b
      - :occurrences: "?"
    - - d
      - :occurrences: "*"
    - - e
      - :occurrences: "?"
        :foreign_class: ^0
        :foreign_field: name
    - - p
      - :occurrences: "?"
    - - q
      - :occurrences: "?"
    - - u
      - :occurrences: "*"
    - - x
      - :occurrences: "*"
        :no_browse: true
    - - z
      - :occurrences: "*"
  "856":
    :master: u
    :indicator: "##"
    :occurrences: "*"
    :fields:
    - - u
      - :occurrences: "*"
        :browse_helper: application_helper_link_http
    - - z
      - :occurrences: "*"

#
# ST NOTE: Repeat value of 852 x repeat value amended to "0" as this field can be discarded on import.
